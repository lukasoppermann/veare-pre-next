function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _CustomElement(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}function _taggedTemplateLiteral(t,e){return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _CustomElement(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}function _taggedTemplateLiteral(t,e){return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_templateObject=_taggedTemplateLiteral(["<style>\n    :host{\n        display: inline-block;\n        flex: 0 1 auto;\n        box-sizing: border-box;\n        width: 100%;\n        height: auto;\n        min-height: 100vh;\n        align-self: center;\n    }\n  </style>\n  <slot></slot>\n"],["<style>\n    :host{\n        display: inline-block;\n        flex: 0 1 auto;\n        box-sizing: border-box;\n        width: 100%;\n        height: auto;\n        min-height: 100vh;\n        align-self: center;\n    }\n  </style>\n  <slot></slot>\n"]),_templateObject2=_taggedTemplateLiteral(['<style>\n    :host{\n      display: flex;\n      flex-direction: column;\n      flex: 0 1 auto;\n      box-sizing: border-box;\n      width: 100%;\n      height: auto;\n      align-self: center;\n    }\n    :host([fullscreen]){\n      min-height: 100vh;\n    }\n    :host([centered]){\n      align-items: stretch;\n      flex-direction: row;\n      justify-content: center;\n    }\n    :host([centered]) > #content{\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      flex: 1 1 auto;\n    }\n    #content{\n      width: var(--page-section-width, auto);\n      height: var(--page-section-height, auto);\n      min-width: var(--page-section-min-width, auto);\n      min-height: var(--page-section-min-height, auto);\n      max-width: var(--page-section-max-width, auto);\n      max-height: var(--page-section-max-height, auto);\n    }\n  </style>\n  <div id="content">\n    <slot></slot>\n  </div>\n'],['<style>\n    :host{\n      display: flex;\n      flex-direction: column;\n      flex: 0 1 auto;\n      box-sizing: border-box;\n      width: 100%;\n      height: auto;\n      align-self: center;\n    }\n    :host([fullscreen]){\n      min-height: 100vh;\n    }\n    :host([centered]){\n      align-items: stretch;\n      flex-direction: row;\n      justify-content: center;\n    }\n    :host([centered]) > #content{\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      flex: 1 1 auto;\n    }\n    #content{\n      width: var(--page-section-width, auto);\n      height: var(--page-section-height, auto);\n      min-width: var(--page-section-min-width, auto);\n      min-height: var(--page-section-min-height, auto);\n      max-width: var(--page-section-max-width, auto);\n      max-height: var(--page-section-max-height, auto);\n    }\n  </style>\n  <div id="content">\n    <slot></slot>\n  </div>\n']);Object.setPrototypeOf(_CustomElement.prototype,HTMLElement.prototype),Object.setPrototypeOf(_CustomElement,HTMLElement),function(){"use strict";var t=function(t){var e=t[t.length-1],n=document.createElement("template");return n.innerHTML=e,n},e=t(_templateObject),n=function(t){function n(){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),i=t.attachShadow({mode:"open"});return"undefined"!=typeof ShadyCSS&&(ShadyCSS.prepareTemplate(e,"page-section-container"),ShadyCSS.styleElement(t)),i.appendChild(document.importNode(e.content,!0)),t}return _inherits(n,_CustomElement),_createClass(n,[{key:"connectedCallback",value:function(){var t,e=this;window.addEventListener("scroll",function(){clearTimeout(t),t=setTimeout(function(){e.setActiveState()},10)}),setTimeout(function(){e.setActiveState()},1)}},{key:"setActiveState",value:function(){this._inView?(this._setActive(),Array.prototype.slice.call(this.querySelectorAll("page-section")).map(function(t,e,n){t.parent=t,t.setActiveState()})):this._setUnactive()}},{key:"_setActive",value:function(){this.hasAttribute("active")||(this.setAttribute("active",""),this.dispatchEvent(new CustomEvent("activated")))}},{key:"_setUnactive",value:function(){this.hasAttribute("active")&&!this.hasAttribute("activated")&&this.setAttribute("activated",""),this.removeAttribute("active"),this.dispatchEvent(new CustomEvent("deactivated"))}},{key:"_inView",get:function(){return this.getBoundingClientRect().bottom>0&&this.getBoundingClientRect().top<window.innerHeight}}]),n}(),i=t(_templateObject2),o=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t._fullscreen=!1,t._maxwidth=null;var n=t.attachShadow({mode:"open"});return"undefined"!=typeof ShadyCSS&&(ShadyCSS.prepareTemplate(i,"page-section"),ShadyCSS.styleElement(t)),n.appendChild(document.importNode(i.content,!0)),t}return _inherits(e,_CustomElement),_createClass(e,[{key:"attributeChangedCallback",value:function(t,e,n){this[t]=n}},{key:"setActiveState",value:function(){this._inView?this._setActive():this._setUnactive()}},{key:"_setActive",value:function(){this.hasAttribute("active")||(this.setAttribute("active",""),this.dispatchEvent(new CustomEvent("activated")))}},{key:"_setUnactive",value:function(){this.hasAttribute("active")&&!this.hasAttribute("activated")&&this.setAttribute("activated",""),this.removeAttribute("active"),this.dispatchEvent(new CustomEvent("deactivated"))}},{key:"_isTruthy",value:function(t){return!0===t||"true"===t||""===t}},{key:"_inView",get:function(){var t=Math.min(1,parseFloat(this.getAttribute("requiredVisible"))||parseFloat(this.parent.getAttribute("requiredVisible"))||.6)*Math.min(this.getBoundingClientRect().height,window.innerHeight),e=this.getBoundingClientRect().height;return e+=Math.min(0,this.getBoundingClientRect().top),(e-=Math.max(0,this.getBoundingClientRect().bottom-window.innerHeight))>=t}},{key:"fullscreen",set:function(t){this._fullscreen!==this._isTruthy(t)&&(this._fullscreen=this._isTruthy(t),this._fullscreen?this.setAttribute("fullscreen",""):this.removeAttribute("fullscreen"))},get:function(){return this._fullscreen}},{key:"maxwidth",set:function(t){if(this._maxwidth!==t){this._maxwidth=t;var e=this.shadowRoot.querySelector("#content");null!==this._maxwidth&&"none"!==this._maxwidth?(e.style.maxWidth=t,this.setAttribute("maxWidth",t)):(e.style.maxWidth="auto",this.removeAttribute("maxWidth"))}},get:function(){return this._maxwidth}}],[{key:"observedAttributes",get:function(){return["src","fullscreen","maxwidth"]}}]),e}();window.customElements.define("page-sections",n),window.customElements.define("page-section",o)}();var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_templateObject=_taggedTemplateLiteral(['<style>\n    :host{\n      display: block;\n    }\n    img{\n      width: 100%;\n      height: auto;\n      vertical-align: top;\n    }\n    figure{\n      margin: 0;\n      display: block;\n      position: relative;\n      overflow: hidden;\n    }\n    :host([ratio]) figure{\n      height: 0;\n      width: 100%;\n    }\n  </style>\n  <figure>\n    <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" />\n  </figure>'],['<style>\n    :host{\n      display: block;\n    }\n    img{\n      width: 100%;\n      height: auto;\n      vertical-align: top;\n    }\n    figure{\n      margin: 0;\n      display: block;\n      position: relative;\n      overflow: hidden;\n    }\n    :host([ratio]) figure{\n      height: 0;\n      width: 100%;\n    }\n  </style>\n  <figure>\n    <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" />\n  </figure>']);Object.setPrototypeOf(_CustomElement.prototype,HTMLElement.prototype),Object.setPrototypeOf(_CustomElement,HTMLElement),function(){"use strict";var t=function(t){"loading"!==document.readyState?t():document.addEventListener("DOMContentLoaded",t)},e=function(t){var e=t[t.length-1],n=document.createElement("template");return n.innerHTML=e,n}(_templateObject),n=function(n){function i(){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));t._src=null,t._placeholder=null,t._active=void 0,t._img=null,t._aspectRatio=null,t._observer=null,t._threshold=.5;var n=t.attachShadow({mode:"open"});return"undefined"!=typeof ShadyCSS&&(ShadyCSS.prepareTemplate(e,"responsive-image"),ShadyCSS.styleElement(t)),n.appendChild(document.importNode(e.content,!0)),t}return _inherits(i,_CustomElement),_createClass(i,[{key:"attributeChangedCallback",value:function(t,e,n){this[t]=n}},{key:"connectedCallback",value:function(){this._setAspectRatio(),this._loadPlaceholder(),this._createObserver()}},{key:"_loadImage",value:function(){var e=this;if(null!==this._src&&"true"===this._active){var n=document.createElement("img");n.addEventListener("load",function(){e._img=e.shadowRoot.querySelector("img"),e._img.setAttribute("src",e._src)}),t(function(){n.setAttribute("src",e._src),e._destroyObserver()})}}},{key:"_loadPlaceholder",value:function(){null!==this._placeholder&&this.shadowRoot.querySelector("img").setAttribute("src",this._placeholder)}},{key:"_createObserver",value:function(){void 0===this._active&&(this._observer=new IntersectionObserver(function(t){t.forEach(function(t){t.isIntersecting&&t.target.setAttribute("active","true")})},{threshold:this.threshold}),this._observer.observe(this))}},{key:"_destroyObserver",value:function(){null!==this._observer&&this._observer.unobserve(this)}},{key:"_setAspectRatio",value:function(){this._aspectRatio&&(this.shadowRoot.querySelector("figure").style.paddingBottom=this._aspectRatio+"%")}},{key:"src",set:function(t){this._src!==t&&(this._src=t,"loading"!==document.readyState&&this._loadImage())},get:function(){return this._src}},{key:"placeholder",set:function(t){this._placeholder!==t&&(this._placeholder=t)},get:function(){return this._placeholder}},{key:"active",set:function(t){t=("true"===t||!0===t).toString(),this._active!==t&&(this._active=t,this.setAttribute("active",this._active),this._loadImage())},get:function(){return this._active}},{key:"threshold",set:function(t){t=parseFloat(parseFloat(t+"").toFixed(2)),(isNaN(t)||t>1||t<0)&&(t=1),this._threshold!==t&&(this._threshold=t)},get:function(){return this._threshold}},{key:"ratio",set:function(t){if(this._aspectRatio!==t){var e=t.split(":"),n=null;n=e.length>1?parseInt(e[1])/parseInt(e[0])*100:parseInt(e[0]),isNaN(n)||(this._aspectRatio=n,this._setAspectRatio())}},get:function(){return this._aspectRatio}}],[{key:"observedAttributes",get:function(){return["src","placeholder","active","threshold","ratio"]}}]),i}();window.customElements.define("responsive-image",n)}();
//# sourceMappingURL=webcomponents.js.map
